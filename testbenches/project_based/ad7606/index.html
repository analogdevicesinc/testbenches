<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AD7606 &#8212; Testbenches  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/style.min.css?v=a9555194" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="" src="../../../_static/app.umd.js?v=689b8755"></script>
    <link rel="icon" href="../../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="PulSAR ADC PMDZ" href="../pulsar_adc/index.html" />
    <link rel="prev" title="AD738x" href="../ad738x/index.html" />
   
  
  <meta name="global_root" content="../../../../">
  <meta name="repo" content="testbenches">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <div class="banner"></div>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button value="search" class="icon"></button>
      <span id="search-progress"></span>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../../index.html">
          <div>HDL Testbenches</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../../documentation/index.html">System Level</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../index.html" class="current">HDL Testbenches</a>
  <a href="../../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../../libiio/index.html">libiio</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../../scopy/index.html">Scopy</a>
  <a href="../../../../doctools/index.html">Doctools</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">AD7606</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#block-design">Block design</a><ul>
<li><a class="reference internal" href="#block-diagram">Block diagram</a></li>
<li><a class="reference internal" href="#configuration-parameters-and-modes">Configuration parameters and modes</a><ul>
<li><a class="reference internal" href="#build-parameters">Build parameters</a></li>
<li><a class="reference internal" href="#configuration-files">Configuration files</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#available-configurations-tests-combinations">Available configurations &amp; tests combinations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpu-memory-interconnect-addresses">CPU/Memory interconnect addresses</a></li>
<li><a class="reference internal" href="#interrupts">Interrupts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-stimulus">Test stimulus</a><ul>
<li><a class="reference internal" href="#environment-bringup">Environment Bringup</a></li>
<li><a class="reference internal" href="#sanity-test">Sanity Test</a></li>
<li><a class="reference internal" href="#simple-configuration-test">SIMPLE Configuration Test</a></li>
<li><a class="reference internal" href="#crc-configuration-test">CRC Configuration Test</a></li>
<li><a class="reference internal" href="#status-configuration-test">STATUS Configuration Test</a></li>
<li><a class="reference internal" href="#status-crc-configuration-test">STATUS CRC Configuration Test</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-the-test-bench">Building the test bench</a></li>
<li><a class="reference internal" href="#resources">Resources</a><ul>
<li><a class="reference internal" href="#hdl-related-dependencies">HDL related dependencies</a></li>
<li><a class="reference internal" href="#testbenches-related-dependencies">Testbenches related dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-information">More information</a></li>
<li><a class="reference internal" href="#support">Support</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../index.html">
      Testbenches
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../documentation/index.html">System Level</a>
  <a href="../../../../hdl/index.html">HDL</a>
  <a href="../../../index.html" class="current">HDL Testbenches</a>
  <a href="../../../../pyadi-iio/index.html">Hardware Python Interfaces</a>
  <a href="../../../../libiio/index.html">libiio</a>
  <a href="../../../../no-OS/index.html">no-OS</a>
  <a href="../../../../precision-converters-firmware/index.html">Precision Converters Firmware</a>
  <a href="../../../../PrecisionToolbox/index.html">Precision Toolbox</a>
  <a href="../../../../scopy/index.html">Scopy</a>
  <a href="../../../../doctools/index.html">Doctools</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../../user_guide/index.html">User Guide</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/git_repository.html">Git repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/releases.html">Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/build_tb.html">Build a test bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/architecture.html">Testbenches architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/coding_guidelines.html">Testbenches coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/docs_guidelines.html">Documentation guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../../../library/index.html">Library</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../../../library/drivers/index.html">Drivers</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1"/><div class="collapse"><a class="reference internal" href="../../../library/drivers/common/index.html">Common</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../library/drivers/common/monitor/index.html">Monitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../library/drivers/common/scoreboard/index.html">Scoreboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../library/drivers/common/watchdog/index.html">Watchdog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../library/drivers/data_offload/index.html">Data Offload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../library/drivers/dmac/index.html">DMAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../library/drivers/jesd/index.html">JESD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../library/drivers/spi_engine/index.html">SPI Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../library/drivers/xcvr/index.html">XCVR</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../library/regmaps/index.html">Registermaps</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../../../library/utilities/index.html">Utilities</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../library/utilities/test_harness/index.html">Test Harness</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3" id="toctree-collapse-2-3"/><div class="collapse"><a class="reference internal" href="../../../library/vip/index.html">Verification IPs (VIP)</a><label for="toctree-collapse-2-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3-1" id="toctree-collapse-2-3-1"/><div class="collapse"><a class="reference internal" href="../../../library/vip/adi/index.html">ADI</a><label for="toctree-collapse-2-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../library/vip/adi/spi_vip/index.html">SPI VIP</a></li>
</ul>
</li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3-2" id="toctree-collapse-2-3-2"/><div class="collapse"><a class="reference internal" href="../../../library/vip/amd/index.html">AMD</a><label for="toctree-collapse-2-3-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../library/vip/amd/axi_vip/index.html">AXI VIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../library/vip/amd/axis_vip/index.html">AXIS VIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../library/vip/amd/clk_vip/index.html">Clock VIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../library/vip/amd/rst_vip/index.html">Reset VIP</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3" checked=""/><div class="collapse"><a class="reference internal" href="../../index.html">Testbenches</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3-1" id="toctree-collapse-3-1"/><div class="collapse"><a class="reference internal" href="../../ip_based/index.html">IP Based</a><label for="toctree-collapse-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ip_based/axis_sequencers/index.html">AXIS Sequencers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ip_based/base/index.html">Base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ip_based/dma_flock/index.html">DMA Framelock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ip_based/i3c_controller/index.html">I3C Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ip_based/util_pack/index.html">Util Pack</a></li>
</ul>
</li>
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3-2" id="toctree-collapse-3-2" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">Project Based</a><label for="toctree-collapse-3-2"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ad463x/index.html">AD463x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ad738x/index.html">AD738x</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">AD7606</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pulsar_adc/index.html">PulSAR ADC PMDZ</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body" role="main">
            
  <section id="ad7606">
<span id="id1"></span><h1>AD7606<a class="headerlink" href="#ad7606" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The purpose of this testbench is to validate the serial interface functionality
of the <a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/projects/ad7606x_fmc">projects/ad7606x_fmc</a> reference design.</p>
<p>The entire HDL documentation can be found here
<a class="reference external" href="https://analogdevicesinc.github.io/hdl/projects/ad7606x_fmc/index.html#ad7606x-fmc" title="(in HDL)"><span class="xref std std-ref">AD7606x-FMC HDL project</span></a>.</p>
</section>
<section id="block-design">
<h2>Block design<a class="headerlink" href="#block-design" title="Link to this heading"></a></h2>
<p>The testbench block design includes part of the AD7606x-FMC HDL reference design,
along with VIPs used for clocking, reset, PS and DDR simulations.</p>
<section id="block-diagram">
<h3>Block diagram<a class="headerlink" href="#block-diagram" title="Link to this heading"></a></h3>
<p>The data path and clock domains are depicted in the below diagram:</p>
<a class="reference internal image-reference" href="../../../_images/ad7606x_tb.svg"><img alt="AD738x/Testbench block diagram" class="align-center" src="../../../_images/ad7606x_tb.svg" style="width: 800px;" />
</a>
</section>
<section id="configuration-parameters-and-modes">
<h3>Configuration parameters and modes<a class="headerlink" href="#configuration-parameters-and-modes" title="Link to this heading"></a></h3>
<p>The following parameters of this project that can be configured:</p>
<ul class="simple">
<li><p>DEV_CONFIG: defines the device:
Options: 0 - AD7606B, 1 - AD7606C-16, 2 - AD7606C-18</p></li>
<li><p>EXT_CLK: defines the usage of an external clock:
Options: 0 - without external clock, 1 - with external clock</p></li>
<li><p>INTF: defines the interface type:
Options: 0 - Parallel, 1 - Serial</p></li>
<li><p>NUM_OF_SDI: defines the number of MOSI lines of the SPI interface:
Options: 1 - Interleaved mode, 2 - 1 lane per channel,
4 - 2 lanes per channel, 8 - 4 lanes per channel</p></li>
</ul>
<section id="build-parameters">
<h4>Build parameters<a class="headerlink" href="#build-parameters" title="Link to this heading"></a></h4>
<p>The parameters mentioned above can be configured when starting the build, like in
the following example:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">DEV_CONFIG</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">EXT_CLK</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">INTF</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">NUM_OF_SDI</span><span class="o">=</span><span class="m">2</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>but we recommend using the already tested build configuration modes, that can be
found in the <code class="docutils literal notranslate"><span class="pre">cfg</span></code> section.</p>
</section>
<section id="configuration-files">
<h4>Configuration files<a class="headerlink" href="#configuration-files" title="Link to this heading"></a></h4>
<p>The following configuration files are available:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Configuration mode</p></th>
<th class="head" colspan="4"><p>Parameters</p></th>
</tr>
<tr class="row-even"><th class="head"><p>DEV_CONFIG</p></th>
<th class="head"><p>EXT_CLK</p></th>
<th class="head"><p>INTF</p></th>
<th class="head"><p>NUM_OF_SDI</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>cfg1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>cfg2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>cfg3</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
</section>
<section id="tests">
<h4>Tests<a class="headerlink" href="#tests" title="Link to this heading"></a></h4>
<p>The following test program file is available:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Test program</p></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>test_program</p></td>
<td><p>Tests the serial interface capabilities.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="available-configurations-tests-combinations">
<h4>Available configurations &amp; tests combinations<a class="headerlink" href="#available-configurations-tests-combinations" title="Link to this heading"></a></h4>
<p>The test program is compatible with all of the above mentioned configurations.</p>
</section>
</section>
<section id="cpu-memory-interconnect-addresses">
<h3>CPU/Memory interconnect addresses<a class="headerlink" href="#cpu-memory-interconnect-addresses" title="Link to this heading"></a></h3>
<p>Below are the CPU/Memory interconnect addresses used in this project:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Instance</p></th>
<th class="head"><p>Address</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>spi_ad7616_axi_regmap</p></td>
<td><p>0x44A0_0000</p></td>
</tr>
<tr class="row-odd"><td><p>axi_ad7606x_dma</p></td>
<td><p>0x44A3_0000</p></td>
</tr>
<tr class="row-even"><td><p>spi_clkgen</p></td>
<td><p>0x44A7_0000</p></td>
</tr>
<tr class="row-odd"><td><p>ad7606_pwm_gen</p></td>
<td><p>0x44B0_0000</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="interrupts">
<h3>Interrupts<a class="headerlink" href="#interrupts" title="Link to this heading"></a></h3>
<p>Below are the Programmable Logic interrupts used in this project:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Instance name</p></th>
<th class="head"><p>HDL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>axi_ad7606_dma</p></td>
<td><p>13</p></td>
</tr>
<tr class="row-odd"><td><p>spi_ad7606</p></td>
<td><p>12</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="test-stimulus">
<h2>Test stimulus<a class="headerlink" href="#test-stimulus" title="Link to this heading"></a></h2>
<p>The test program is structured into several tests as follows:</p>
<section id="environment-bringup">
<h3>Environment Bringup<a class="headerlink" href="#environment-bringup" title="Link to this heading"></a></h3>
<p>The steps of the environment bringup are:</p>
<ul class="simple">
<li><p>Create the environment</p></li>
<li><p>Start the environment</p></li>
<li><p>Start the clocks</p></li>
<li><p>Assert the resets</p></li>
</ul>
</section>
<section id="sanity-test">
<h3>Sanity Test<a class="headerlink" href="#sanity-test" title="Link to this heading"></a></h3>
<p>This test is used to check the communication with the AXI REGMAP module of the
AD7606 SPI Engine interface, by reading the core VERSION register, along with
writing and reading the SCRATCH register.</p>
</section>
<section id="simple-configuration-test">
<h3>SIMPLE Configuration Test<a class="headerlink" href="#simple-configuration-test" title="Link to this heading"></a></h3>
<p>The adc_config_SIMPLE_test is used for verifying the mode 0 of the ADC.</p>
<p>The steps of this test are:</p>
<ul class="simple">
<li><p>Get the ADC common core out of reset</p></li>
<li><p>Set &amp; read the ADC_CONFIG WR &amp; CTRL registers of the ADC_COMMON</p></li>
<li><p>Read data on the rx_db_o port</p></li>
<li><p>Set HDL config mode 0</p></li>
</ul>
</section>
<section id="crc-configuration-test">
<h3>CRC Configuration Test<a class="headerlink" href="#crc-configuration-test" title="Link to this heading"></a></h3>
<p>The adc_config_CRC_test is used for verifying the mode 1 of the ADC.</p>
<p>The steps of this test are:</p>
<ul class="simple">
<li><p>Get the ADC common core out of reset</p></li>
<li><p>Set CRC and static data setup</p></li>
<li><p>Set &amp; read the ADC_CONFIG WR &amp; CTRL registers of the ADC_COMMON</p></li>
<li><p>Read data on the rx_db_o port</p></li>
<li><p>Set HDL config mode 1</p></li>
</ul>
</section>
<section id="status-configuration-test">
<h3>STATUS Configuration Test<a class="headerlink" href="#status-configuration-test" title="Link to this heading"></a></h3>
<p>The adc_config_STATUS_test is used for verifying the mode 2 of the ADC.</p>
<p>The steps of this test are:</p>
<ul class="simple">
<li><p>Get the ADC common core out of reset</p></li>
<li><p>Set STATUS and static data setup</p></li>
<li><p>Set &amp; read the ADC_CONFIG WR &amp; CTRL registers of the ADC_COMMON</p></li>
<li><p>Read data on the rx_db_o port</p></li>
<li><p>Set HDL config mode 2</p></li>
</ul>
</section>
<section id="status-crc-configuration-test">
<h3>STATUS CRC Configuration Test<a class="headerlink" href="#status-crc-configuration-test" title="Link to this heading"></a></h3>
<p>The adc_config_STATUS_CRC_test is used for verifying the mode 3 of the ADC.</p>
<p>The steps of this test are:</p>
<ul class="simple">
<li><p>Get the ADC common core out of reset</p></li>
<li><p>Set CRC and static data setup</p></li>
<li><p>Set STATUS and static data setup</p></li>
<li><p>Set &amp; read the ADC_CONFIG WR &amp; CTRL registers of the ADC_COMMON</p></li>
<li><p>Read data on the rx_db_o port</p></li>
<li><p>Set HDL config mode 3</p></li>
</ul>
</section>
</section>
<section id="building-the-test-bench">
<h2>Building the test bench<a class="headerlink" href="#building-the-test-bench" title="Link to this heading"></a></h2>
<p>The testbench is built upon ADI’s generic HDL reference design framework.
ADI does not distribute compiled files of these projects so they must be built
from the sources available <a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/">here</a> and <a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/">here</a>,
with the specified hierarchy described <a class="reference internal" href="../../../user_guide/build_tb.html#build-tb-set-up-tb-repo"><span class="std std-ref">Set up the Testbenches repository</span></a>.
To get the source you must
<a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository">clone</a>
the HDL repository, and then build the project as follows:.</p>
<p><strong>Linux/Cygwin/WSL</strong></p>
<p><em>Example 1</em></p>
<p>Build all the possible combinations of tests and configurations, using only the
command line.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>testbenches/project/ad7606x
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~/testbenches/project/ad7606x$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make
</pre></div>
</div>
<div class="clear-left"></div></div></div><p><em>Example 2</em></p>
<p>Build all the possible combinations of tests and configurations, using the
Vivado GUI. This command will launch Vivado, will run the simulation and display
the waveforms.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>testbenches/project/ad7606x
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~/testbenches/project/ad7606x$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">MODE</span><span class="o">=</span>gui
</pre></div>
</div>
<div class="clear-left"></div></div></div><p><em>Example 3</em></p>
<p>Build a particular combination of test and configuration, using the Vivado GUI.
This command will launch Vivado, will run the simulation and display the
waveforms.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>testbenches/project/ad7606x
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~/testbenches/project/ad7606x$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">MODE</span><span class="o">=</span>gui<span class="w"> </span><span class="nv">CFG</span><span class="o">=</span>cfg1<span class="w"> </span><span class="nv">TST</span><span class="o">=</span>test_program
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>The built projects can be found in the <code class="docutils literal notranslate"><span class="pre">runs</span></code> folder, where each configuration
specific build has it’s own folder named after the configuration file’s name.
Example: if the following command was run for a single configuration in the
clean folder (no runs folder available):</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">CFG=cfg1</span></code></p>
<p>Then the subfolder under <code class="docutils literal notranslate"><span class="pre">runs</span></code> name will be:</p>
<p><code class="docutils literal notranslate"><span class="pre">cfg1</span></code></p>
</section>
<section id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Link to this heading"></a></h2>
<section id="hdl-related-dependencies">
<h3>HDL related dependencies<a class="headerlink" href="#hdl-related-dependencies" title="Link to this heading"></a></h3>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 45.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>IP name</p></th>
<th class="head"><p>Source code link</p></th>
<th class="head"><p>Documentation link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SYNC_BITS</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/util_cdc/sync_bits.v">library/util_cdc/sync_bits.v</a> **</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>AD_EDGE_DETECT</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/common/ad_edge_detect.v">library/common/ad_edge_detect.v</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>AXI_AD7606x</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_ad7606x">library/axi_ad7606x</a> *</p></td>
<td><p><a class="reference external" href="https://wiki.analog.com/resources/fpga/docs/axi_ad7606x">[Wiki]</a></p></td>
</tr>
<tr class="row-odd"><td><p>AXI_CLKGEN</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_clkgen">library/axi_clkgen</a></p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/axi_clkgen/index.html#axi-clkgen" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>AXI_DMAC</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_dmac">library/axi_dmac</a></p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/axi_dmac/index.html#axi-dmac" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>AXI_HDMI_TX</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_hdmi_tx">library/axi_hdmi_tx</a></p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/axi_hdmi_tx/index.html#axi-hdmi-tx" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>AXI_I2S_ADI</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_i2s_adi">library/axi_i2s_adi</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>AXI_PWM_GEN</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_pwm_gen">library/axi_pwm_gen</a></p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/axi_pwm_gen/index.html#axi-pwm-gen" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>AXI_SPDIF_TX</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_spdif_tx">library/axi_spdif_tx</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>AXI_SYSID</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/axi_sysid">library/axi_sysid</a></p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/axi_sysid/index.html#axi-sysid" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>AXI_SPI_ENGINE</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/spi_engine/axi_spi_engine">library/spi_engine/axi_spi_engine</a>  **</p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/spi_engine/axi_spi_engine.html#spi-engine-axi" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>SPI_ENGINE_EXECUTION</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/spi_engine/spi_engine_execution">library/spi_engine/spi_engine_execution</a> **</p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/spi_engine/spi_engine_execution.html#spi-engine-execution" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>SPI_ENGINE_INTERCONNECT</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/spi_engine/spi_engine_interconnect">library/spi_engine/spi_engine_interconnect</a> **</p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/spi_engine/spi_engine_interconnect.html#spi-engine-interconnect" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>SPI_ENGINE_OFFLOAD</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/spi_engine/spi_engine_offload">library/spi_engine/spi_engine_offload</a> **</p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/spi_engine/spi_engine_offload.html#spi-engine-offload" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-even"><td><p>SYSID_ROM</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/sysid_rom">library/sysid_rom</a></p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/axi_sysid/index.html#axi-sysid" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>UTIL_I2C_MIXER</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/util_i2c_mixer">library/util_i2c_mixer</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>UTIL_CPACK2</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/hdl/tree/main/library/util_pack/util_cpack2">library/util_pack/util_cpack2</a> *</p></td>
<td><p><a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/util_pack/util_cpack2.html#util-cpack2" title="(in HDL)"><span class="xref std std-ref">here</span></a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="note admonition">
<p class="admonition-title">Legend</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> instantiated only for INTF=0 (parallel interface)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">**</span></code> instantiated only for INTF=1 (serial interface)</p></li>
</ul>
</div>
</section>
<section id="testbenches-related-dependencies">
<h3>Testbenches related dependencies<a class="headerlink" href="#testbenches-related-dependencies" title="Link to this heading"></a></h3>
<p>Common with most testbenches:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 45.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SV dependency name</p></th>
<th class="head"><p>Source code link</p></th>
<th class="head"><p>Documentation link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LOGGER_PKG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/utilities/logger_pkg.sv">library/utilities/logger_pkg.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>M_AXI_SEQUENCER</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/vip/amd/m_axi_sequencer.sv">library/vip/amd/m_axi_sequencer.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>REG_ACCESSOR</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/regmaps/reg_accessor.sv">library/regmaps/reg_accessor.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>S_AXI_SEQUENCER</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/vip/amd/s_axi_sequencer.sv">library/vip/amd/s_axi_sequencer.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>TEST_HARNESS_ENV</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/utilities/test_harness_env.sv">library/utilities/test_harness_env.sv</a></p></td>
<td><p><a class="reference internal" href="../../../library/utilities/test_harness/index.html#test-harness"><span class="std std-ref">Test Harness</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>UTILS</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/utilities/utils.svh">library/utilities/utils.svh</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>WATCHDOG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/drivers/common/watchdog.sv">library/drivers/common/watchdog.sv</a></p></td>
<td><p><a class="reference internal" href="../../../library/drivers/common/watchdog/index.html#watchdog"><span class="std std-ref">Watchdog</span></a></p></td>
</tr>
</tbody>
</table>
</div>
<p>Testbench specific dependencies:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 45.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SV dependency name</p></th>
<th class="head"><p>Source code link</p></th>
<th class="head"><p>Documentation link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ADI_REGMAP_ADC_PKG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/regmaps/adi_regmap_adc_pkg.sv">library/regmaps/adi_regmap_adc_pkg.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>ADI_REGMAP_COMMON_PKG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/regmaps/adi_regmap_common_pkg.sv">library/regmaps/adi_regmap_common_pkg.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>ADI_REGMAP_DMAC_PKG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/regmaps/adi_regmap_dmac_pkg.">library/regmaps/adi_regmap_dmac_pkg.</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>ADI_REGMAP_PKG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/regmaps/adi_regmap_pkg.sv">library/regmaps/adi_regmap_pkg.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>ADI_REGMAP_PWM_GEN_PKG</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/regmaps/adi_regmap_pwm_gen_pkg.sv">library/regmaps/adi_regmap_pwm_gen_pkg.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>DMA_TRANS</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/drivers/dmac/dma_trans.sv">library/drivers/dmac/dma_trans.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>DMAC_API</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/drivers/dmac/dmac_api.sv">library/drivers/dmac/dmac_api.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-odd"><td><p>M_AXIS_SEQUENCER</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/vip/amd/m_axis_sequencer.sv">library/vip/amd/m_axis_sequencer.sv</a></p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>S_AXIS_SEQUENCER</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/tree/main/library/vip/amd/s_axis_sequencer.sv">library/vip/amd/s_axis_sequencer.sv</a></p></td>
<td><p>—</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="more-information">
<h2>More information<a class="headerlink" href="#more-information" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../../user_guide/index.html#user-guide"><span class="std std-ref">ADI Testbenches User guide</span></a></p></li>
</ul>
</section>
<section id="support">
<h2>Support<a class="headerlink" href="#support" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://www.analog.com/en/index.html">Analog Devices, Inc.</a> will provide <strong>limited</strong> online support for anyone
using the <a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/">reference design</a> with <a class="reference external" href="https://www.analog.com/en/index.html">ADI</a> components via
the <a class="icon ez reference external" href="https://ez.analog.com/fpga">EngineerZone</a> FPGA reference designs forum.</p>
<p>It should be noted, that the older the tools’ versions and release branches
are, the lower the chances to receive support from <a class="reference external" href="https://www.analog.com/en/index.html">ADI</a> engineers.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../ad738x/index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">AD738x</a>
    <a href="../pulsar_adc/index.html" title="Next document (Alt+Shift+RightArrow)" class="next">PulSAR ADC PMDZ</a>
              </div>
          
        </div>
      </div>
  </div>

  <div id="vertical-border"></div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>