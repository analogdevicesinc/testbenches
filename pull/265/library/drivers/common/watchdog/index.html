<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="The purpose of this class is to provide an object that can stop a simulation run, most importantly to prevent system hangs, never ending simulation runs. The designer of the test stimulus needs to have a good understanding of the design under test to be able to configure the watchdog module properly. The watchdog object can be used on the entire test stimulus or on smaller test cases, where there is a moderate chance that the system may hang, and to prevent such instances to happen." name="description" />

    <title>Watchdog &#8212; Testbenches  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/app.min.css?v=31a9e0ba" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css" />
    <script async="async" src="../../../../_static/app.umd.js?v=3a4867e9"></script>
    <link rel="icon" href="../../../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Data Offload" href="../../data_offload/index.html" />
    <link rel="prev" title="Scoreboard" href="../scoreboard/index.html" />
   
  
  
  <meta name="repository" content="testbenches">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head>
  
    <body>
  
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com" aria-label="Analog Devices Inc. landing page"></a>
        <div class="vertical-divider"></div>
        
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        
        <a id="logo" href="../../../../index.html">
          <div>HDL Testbenches</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../../index.html" class="current">HDL Testbenches</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div class="header localtoc-header">
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Watchdog</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#functions">Functions</a><ul>
<li><a class="reference internal" href="#function-new-bit-31-0-timer-string-message">function new(bit [31:0] timer, string message);</a></li>
<li><a class="reference internal" href="#function-void-update-message-string-message">function void update_message(string message);</a></li>
<li><a class="reference internal" href="#function-void-update-timer-bit-31-0-timer">function void update_timer(bit [31:0] timer);</a></li>
<li><a class="reference internal" href="#task-start">task start();</a></li>
<li><a class="reference internal" href="#task-stop">task stop();</a></li>
<li><a class="reference internal" href="#task-reset">task reset();</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage-and-recommendations">Usage and recommendations</a></li>
<li><a class="reference internal" href="#support">Support</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../../index.html">
      Testbenches
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../index.html" class="current">HDL Testbenches</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../../../user_guide/index.html">User Guide</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/git_repository.html">Git repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/releases.html">Releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/build_tb.html">Build a testbench</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/hierarchy.html">Repository hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/create_edit_tb.html">Creation and editing of HDL testbenches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/coding_guidelines.html">Testbenches coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/debug_tb.html">Debugging a testbench</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_guide/docs_guidelines.html">Documentation guidelines</a></li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2" checked=""/><div class="collapse"><a class="reference internal" href="../../../index.html">Library</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1" checked=""/><div class="collapse"><a class="reference internal" href="../../index.html">Drivers</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">Common</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../scoreboard/index.html">Scoreboard</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Watchdog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../data_offload/index.html">Data Offload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dmac/index.html">DMAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../jesd/index.html">JESD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../spi_engine/index.html">SPI Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../xcvr/index.html">XCVR</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../regmaps/index.html">Registermaps</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-2" id="toctree-collapse-2-2"/><div class="collapse"><a class="reference internal" href="../../../utilities/index.html">Utilities</a><label for="toctree-collapse-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../utilities/test_harness/index.html">Test Harness</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3" id="toctree-collapse-2-3"/><div class="collapse"><a class="reference internal" href="../../../vip/index.html">Verification IPs (VIP)</a><label for="toctree-collapse-2-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3-1" id="toctree-collapse-2-3-1"/><div class="collapse"><a class="reference internal" href="../../../vip/adi/index.html">ADI</a><label for="toctree-collapse-2-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../vip/adi/spi_vip/index.html">SPI VIP</a></li>
</ul>
</li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3-2" id="toctree-collapse-2-3-2"/><div class="collapse"><a class="reference internal" href="../../../vip/amd/index.html">AMD</a><label for="toctree-collapse-2-3-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3-2-1" id="toctree-collapse-2-3-2-1"/><div class="collapse"><a class="reference internal" href="../../../vip/amd/axi_vip/index.html">AXI VIP</a><label for="toctree-collapse-2-3-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axi_vip/adi_axi_agent.html">ADI AXI Agent</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axi_vip/m_axi_sequencer.html">ADI AXI Master Sequencer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axi_vip/s_axi_sequencer.html">ADI AXI Slave Sequencer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axi_vip/adi_axi_monitor.html">ADI AXI Monitor</a></li>
</ul>
</li>
<li class="toctree-l4"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-3-2-2" id="toctree-collapse-2-3-2-2"/><div class="collapse"><a class="reference internal" href="../../../vip/amd/axis_vip/index.html">AXIS VIP</a><label for="toctree-collapse-2-3-2-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axis_vip/adi_axis_agent.html">ADI AXIS Agent</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axis_vip/m_axis_sequencer.html">ADI AXIS Master Sequencer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axis_vip/s_axis_sequencer.html">ADI AXIS Slave Sequencer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../vip/amd/axis_vip/adi_axis_monitor.html">ADI AXIS Monitor</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../vip/amd/clk_vip/index.html">Clock VIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../vip/amd/rst_vip/index.html">Reset VIP</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../../../testbenches/index.html">Testbenches</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3-1" id="toctree-collapse-3-1"/><div class="collapse"><a class="reference internal" href="../../../../testbenches/ip_based/index.html">IP Based</a><label for="toctree-collapse-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/axis_sequencers/index.html">AXIS Sequencers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/base/index.html">Base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/dma_flock/index.html">DMA Framelock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/dma_loopback/index.html">DMA Loopback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/dma_sg/index.html">DMA Scatter-Gather</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/i3c_controller/index.html">I3C Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/jesd_loopback/index.html">JESD Loopback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/util_axis_fifo/index.html">Util AXIS FIFO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/util_axis_fifo_asym/index.html">Util AXIS FIFO Asymmetric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/ip_based/util_pack/index.html">Util Pack</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3-2" id="toctree-collapse-3-2"/><div class="collapse"><a class="reference internal" href="../../../../testbenches/project_based/index.html">Project Based</a><label for="toctree-collapse-3-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/ad463x/index.html">AD463x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/ad57xx/index.html">AD57XX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/ad738x/index.html">AD738x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/ad7606/index.html">AD7606</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/ad7616/index.html">AD7616</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/ad9083/index.html">AD9083</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/adrv9001/index.html">ADRV9001</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/fmcomms2/index.html">FMCOMMS2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/pluto/index.html">PLUTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../testbenches/project_based/pulsar_adc/index.html">PulSAR ADC PMDZ</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
  <nav class="breadcrumb"><ol><li><a href="../../../index.html">Library</a></li><li><a href="../../index.html">Drivers</a></li><li><a href="../index.html">Common</a></li></ol></nav>
</div>
          <div class="body" role="main">
            
  <section id="watchdog">
<span id="id1"></span><h1>Watchdog<a class="headerlink" href="#watchdog" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The purpose of this class is to provide an object that can stop a simulation
run, most importantly to prevent system hangs, never ending simulation runs.
The designer of the test stimulus needs to have a good understanding of the
design under test to be able to configure the watchdog module properly. The
watchdog object can be used on the entire test stimulus or on smaller test
cases, where there is a moderate chance that the system may hang, and to
prevent such instances to happen.</p>
</section>
<section id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Link to this heading"></a></h2>
<p>None are available for direct external access.</p>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<section id="function-new-bit-31-0-timer-string-message">
<h3>function new(bit [31:0] timer, string message);<a class="headerlink" href="#function-new-bit-31-0-timer-string-message" title="Link to this heading"></a></h3>
<p>Creates the watchdog object. The timer variable is used to set the default
timer value after which the watchdog is triggered. This value must be set in
nanoseconds. The message value sets the default output message when the
watchdog is triggered.</p>
</section>
<section id="function-void-update-message-string-message">
<h3>function void update_message(string message);<a class="headerlink" href="#function-void-update-message-string-message" title="Link to this heading"></a></h3>
<p>Used to update the timer value. The timer variable is used to set the new timer
value after which the watchdog is triggered.</p>
</section>
<section id="function-void-update-timer-bit-31-0-timer">
<h3>function void update_timer(bit [31:0] timer);<a class="headerlink" href="#function-void-update-timer-bit-31-0-timer" title="Link to this heading"></a></h3>
<p>Used to update the watchdog message. The message value sets the watchdog output
message when this is triggered. This value must be set in nanoseconds.</p>
</section>
<section id="task-start">
<h3>task start();<a class="headerlink" href="#task-start" title="Link to this heading"></a></h3>
<p>Starts the watchdog timer in a separate thread. This allows other code to be
run in parallel with it. When the watchdog timer reaches the wait time that was
set prior to starting of the watchdog, either with a default value or an
updated value, it is triggered, prints out the watchdog message and then the
simulation is halted. If the watchdog receives a stop event, the thread is
killed and the counting stops. This means that the watchdog will not trigger in
this instance and the simulation will not be halted.</p>
</section>
<section id="task-stop">
<h3>task stop();<a class="headerlink" href="#task-stop" title="Link to this heading"></a></h3>
<p>Stops the watchdog timer when called. Used when the designer wants to stop the
watchdog timer.</p>
</section>
<section id="task-reset">
<h3>task reset();<a class="headerlink" href="#task-reset" title="Link to this heading"></a></h3>
<p>Stops and then starts again the watchdog timer using the start and stop
functions.</p>
</section>
</section>
<section id="usage-and-recommendations">
<h2>Usage and recommendations<a class="headerlink" href="#usage-and-recommendations" title="Link to this heading"></a></h2>
<p>Basic usage of the watchdog timer:</p>
<ul class="simple">
<li><p>Declare the watchdog timer, give an initial value for the timer and the
message. These can be changed later</p></li>
<li><p>Update the watchdog timer value and message if needed</p></li>
<li><p>Start the watchdog timer</p></li>
<li><p>Add test stimulus that needs to be timed by the watchdog timer</p></li>
<li><p>Stop the watchdog timer if the stimulus finished the process</p></li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The watchdog timer value must be set higher than the time the stimulus needs
to finish the execution of the process. At the initial development of the
test stimulus, this value should be oversized by a couple times the estimated
value, to ensure that the test case has enough time to complete the process
in case the original execution time is well underestimated. After a couple of
iterations when the process execution time bounds are known, the watchdog
timer should be reduced to the value that is: highest execution time for the
process +20-30% of this time to ensure that the process can terminate
properly.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Multiple instances of the same watchdog timer object should not be started,
before the previous one is stopped. This will cause multiple instances of the
same watchdog to be started in separate threads. When the stop function is
called for this watchdog timer object, it will stop all currently active
watchdog timer threads. To use multiple watchdog timers all at the same time,
multiple watchdog timer objects need to be created, each with its own message
and timer value. This will allow each one of these to be controlled
independently.</p>
</div>
<p>Other use-cases for the watchdog timer:</p>
<ul class="simple">
<li><p>Repetitive test stimulus that takes a long time to finish and may cause
system hanging. In this case it is more advisable have a watchdog timer
stopped and started or reset each time a repetitive task is completed. This
allows for a stricter watchdog timer value, which may stop a hanging
simulation sooner without waiting for the whole process to finish.</p></li>
</ul>
</section>
<section id="support">
<h2>Support<a class="headerlink" href="#support" title="Link to this heading"></a></h2>
<p><a class="icon link reference external" href="https://www.analog.com/en/index.html" target="_blank">Analog Devices, Inc.</a> will provide <strong>limited</strong> online support for anyone
using the <a class="icon git reference external" href="https://github.com/analogdevicesinc/testbenches/" target="_blank">reference design</a> with <a class="icon link reference external" href="https://www.analog.com/en/index.html" target="_blank">ADI</a> components via
the <a class="icon ez reference external" href="https://ez.analog.com/fpga" target="_blank">EngineerZone</a> FPGA reference designs forum.</p>
<p>It should be noted, that the older the toolsâ€™ versions and release branches
are, the lower the chances to receive support from <a class="icon link reference external" href="https://www.analog.com/en/index.html" target="_blank">ADI</a> engineers.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../scoreboard/index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Scoreboard</a>
    <a href="../../data_offload/index.html" title="Next document (Alt+Shift+RightArrow)" class="next">Data Offload</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024-2025, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>